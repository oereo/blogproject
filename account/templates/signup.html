{% extends 'accounts_base.html' %}
{% block content %}
<hr>
  <body class="text-center">
    <form class="signup-form" method='POST' action="{% url 'signup' %}">
      {% csrf_token %}
    

      <br>
        <div class="progress" style = "margin-bottom : 0px; height : 15px;">
          <div class="progress-bar" role="progressbar" style=" width: 66%; background-color : orange;" aria-valuenow="33" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
  
        <table width=960px; style = "margin-left : 50px; font-size : 15px;" >
          <thead > 
            <tr>
              <th></th>
              <th style = "text-align : center">이용약관</th>
              <th style = "text-align : center">정보기입</th>
              <th style = "text-align : center">가입완료</th>
             </tr>
          </thead>
          
        </table>
               
        <br>
      <center>
       <div style="width:700px; background-color:rgba(240, 240, 240, 0.29)">
        <br>
      <h1 class="h1 mb-3 font-weight-normal">Please sign up</h1><br>
      <label for="inputEmail" class="sr-only">user id</label>
      &emsp; &emsp; &emsp;&emsp; &nbsp;<input type="text"  id="username" required name="username" class="form-control" placeholder="User Id" style="font-size : 15px;width:250px; display:inline;"> <button id = "checkid"  style="display:inline; border-radius: 5px;background-color : orange;color:white">중복확인</button><br>
      <br>
      <label for="inputPassword" class="sr-only">job</label>
      <input type="text" id="job" required name="job" class="form-control" placeholder="Job" style="font-size : 15px;width:250px"><br>
      <label for="inputPassword" class="sr-only">location</label>
      <input type="text"  id="location" required name="location" class="form-control" placeholder="Location you live" style="font-size : 15px;width:250px"><br>
      <label for="inputPassword" class="sr-only">Email</label>
      <input type="email"  id="email" required name="email" class="form-control" placeholder="Email" style="font-size : 15px;width:250px"><br>
      <label for="inputPassword" class="sr-only">Password</label>
      <input type="password" id="password" class="form-control" name="password" placeholder="password" required style="font-size : 15px;width:250px"><br>
      <label for="inputPassword" class="sr-only">Password Confirm</label>
      <input type="password" id="confirm" class="form-control" name="password_confirm" placeholder="password confirm" required style="font-size : 15px;width:250px"><br>
      <br>
      <button class="btn btn-lg btn-primary btn-block" type="submit" value="Sign Up"  style=" background-color : orange; width:150px;border:orange ">Sign Up</button>
      <br>
      </div>
      <br>
      <br>
      
    
    </center>
     
    </form>

  
  </body>





<!--  -->
<div class="line"></div>

    <script>
      $(function(){
        $('#checkid').click(function(){
          var username = $('#username').val();
          if(username==''){
            alert('아이디를 입력해주세요.');
            return;
          }
          $.ajax({
            url:'checkid?username='+username,
            type:'get',
            dataType: 'json',
            success:function(response){
              if(response.result != 'success'){
                console.error(response.data)
                return;
              }
              if(response.data == 'exist'){
                alert('존재하는 아이디입니다.')
                $('#username').val('').focus();
                return;
              } else {
                $('#checkid').hide();
                return;
              }
            },
            error : function(xhr, error){
              alert('서버와의 통신에 문제가 발생했습니다.')
              console.log('error : '+ error);
            }
          })
        })
      });
    </script>
{% endblock %}